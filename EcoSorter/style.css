/* ===========================
   Eco Sorter â€” Themed UI
   =========================== */

:root{
  --bg:           #f7fafc;
  --panel:        #ffffff;
  --ink:          #0f172a;
  --muted:        #6b7280;

  --brand:        #2563eb;   /* dynamic via body[data-theme] */
  --brand-ink:    #ffffff;

  --bin:          #d1d5db;

  --shadow-sm:    0 3px 10px rgba(15, 23, 42, .06);
  --shadow-md:    0 10px 25px rgba(15, 23, 42, .08);
  --shadow-lg:    0 20px 40px rgba(15, 23, 42, .10);

  --ease:         cubic-bezier(.2,.9,.2,1);
  --fast:         180ms var(--ease);
  --med:          280ms var(--ease);

  --tint1:        #e0f2fe;
  --tint2:        #ede9fe;

  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

/* Themes */
body[data-theme="plastic"]   { --brand:#fb923c; --tint1:#fff1e6; --tint2:#fde68a; }
body[data-theme="paper"]     { --brand:#22c55e; --tint1:#dcfce7; --tint2:#bbf7d0; }
body[data-theme="organic"]   { --brand:#16a34a; --tint1:#e7f9eb; --tint2:#d3f8d7; }
body[data-theme="metal"]     { --brand:#64748b; --tint1:#e2e8f0; --tint2:#cbd5e1; }
body[data-theme="glass"]     { --brand:#0ea5e9; --tint1:#e0f2fe; --tint2:#bae6fd; }
body[data-theme="cardboard"] { --brand:#a16207; --tint1:#fef3c7; --tint2:#fde68a; }
body[data-theme="hazardous"] { --brand:#ef4444; --tint1:#fee2e2; --tint2:#fecaca; }
body[data-theme="residual"]  { --brand:#6b7280; --tint1:#f3f4f6; --tint2:#e5e7eb; }
body[data-theme="recyclable"]{ --brand:#2563eb; --tint1:#e0e7ff; --tint2:#c7d2fe; }
body[data-theme="default"]   { --brand:#2563eb; --tint1:#e0f2fe; --tint2:#ede9fe; }

*{box-sizing:border-box}
:focus{outline:none}
:focus-visible{
  outline: 3px solid color-mix(in srgb, var(--brand) 60%, white);
  outline-offset: 2px; border-radius: 8px;
}

html,body{height:100%}
body{
  margin:0; color:var(--ink);
  background:
    radial-gradient(1200px 500px at 80% -10%, var(--tint1) 0%, transparent 60%),
    radial-gradient(1000px 600px at -10% 100%, var(--tint2) 0%, transparent 60%),
    var(--bg);
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
  transition: background-color var(--med), background-image var(--med);
}

/* Header */
#topbar{
  position:sticky; top:0; z-index:100;
  background: linear-gradient(180deg, color-mix(in srgb, var(--brand) 85%, black 0%), var(--brand));
  padding:18px; text-align:center; box-shadow: var(--shadow-sm);
  border-bottom: 1px solid rgba(255,255,255,.12);
  transition: background var(--med);
}
#topbar h1{
  margin:0; color:var(--brand-ink); letter-spacing:.12em; font-weight:800;
  font-size: clamp(18px, 2.2vw, 26px);
}

/* Layout */
#layout{
  display:flex; gap: clamp(20px, 4vw, 56px); justify-content:center; align-items:flex-start;
  padding: clamp(20px, 3.5vw, 40px) clamp(16px, 3vw, 28px);
  max-width:1200px; margin:0 auto;
}
#leftCol{ width:min(640px, 100%); display:flex; flex-direction:column; align-items:center; gap:16px; }
#rightCol{ width:min(380px, 100%); display:flex; flex-direction:column; align-items:center; gap:16px; }

/* Monitor */
.monitor{ width:100%; display:flex; justify-content:center }
.monitor-bezel{
  width:100%; border-radius:16px; background: linear-gradient(180deg, #f3f4f6, #e5e7eb);
  padding:18px 18px 28px; box-shadow: var(--shadow-md); border:1px solid #e5e7eb; position:relative;
}
.monitor-screen{
  width:100%; aspect-ratio: 16 / 9; background:#0b0f19; border-radius:10px; overflow:hidden; position:relative;
  display:grid; place-items:center;
}
.monitor-screen::before{ content:""; position:absolute; inset:0; background: radial-gradient(60% 80% at 50% 40%, transparent, rgba(0,0,0,.3)); pointer-events:none; }
.monitor-screen video{ width:100%; height:100%; object-fit:cover; border-radius:8px; z-index:1; }
.monitor-chin{
  margin-top:12px; width:72%; margin-inline:auto; background: linear-gradient(#ffffff,#f3f4f6);
  color:#334155; text-align:center; padding:8px 12px; border-radius:10px; font-weight:700;
  box-shadow: inset 0 -2px 0 rgba(0,0,0,0.05); border:1px solid #e5e7eb;
}

/* Controls */
.controls{width:100%; text-align:center; background:transparent}
.hint{color:var(--muted); font-size:13px; margin:6px 0 2px}
.btn-row{display:flex; gap:12px; justify-content:center; margin:8px 0}
button{
  background: var(--brand); color: var(--brand-ink); border:0; padding:10px 14px;
  border-radius: 10px; font-weight:800; letter-spacing:.02em; box-shadow: var(--shadow-sm);
  transition: transform var(--fast), box-shadow var(--fast), background var(--fast), opacity var(--fast);
}
button:hover{ transform: translateY(-1px); box-shadow: var(--shadow-md) }
button:active{ transform: translateY(0); box-shadow: var(--shadow-sm) }
button[disabled]{ opacity:.6; cursor:not-allowed; }
button.ghost{ background:transparent; color:var(--brand); border:2px solid var(--brand); }
button.ghost:hover{ background: color-mix(in srgb, var(--brand) 12%, white); }
.upload-row{ display:flex; gap:10px; justify-content:center; align-items:center; margin-top:4px; }
.upload-row input{ display:none }
#uploadBtn::before{ content:"ðŸ“·"; margin-right:6px; }

@media (max-width: 980px){
  #layout{ flex-direction:column; align-items:center }
}

/* Cards */
.result-card{
  width:100%; background: var(--panel); border-radius: 14px; padding: 14px;
  border:1px solid #e5e7eb; box-shadow: var(--shadow-md);
  display:flex; flex-direction:column; align-items:center; gap:10px;
  transition: transform var(--med), opacity var(--med), box-shadow var(--med);
  opacity:0; transform: translateY(8px) scale(.99);
}
.result-card.visible{ opacity:1; transform:none; }
.result-card:hover{ box-shadow: var(--shadow-lg) }
.thumb{ width:min(220px, 90%); aspect-ratio: 3 / 2; background:#f8fafc; border-radius:12px; display:grid; place-items:center; overflow:hidden; border:1px dashed #e2e8f0; }
.thumb img{ max-width:100%; max-height:100%; object-fit:contain }
.meta{ width:100%; text-align:center }
#itemLabel, #binLabel{ font-weight:800; letter-spacing:.01em }
.muted{ color:var(--muted); font-size:13px }

/* Arrow */
#arrow{ font-size:44px; color:#ef4444; opacity:0; transform:translateY(-8px); transition: transform var(--med), opacity var(--med); }
#arrow.visible{ opacity:1; transform:none; animation: arrowBounce 1200ms ease-in-out infinite; }

/* Bin */
.bin-outer{ width:230px; display:flex; flex-direction:column; align-items:center; gap:8px }
.bin-lid{
  width:200px; height:28px; position:relative; transform-origin:center bottom; transition: transform 520ms var(--ease);
  z-index:3; filter: drop-shadow(0 2px 4px rgba(0,0,0,.08));
}
.lid-top{
  width:100%; height:100%; border-radius: 12px 12px 8px 8px;
  background: linear-gradient(180deg, #f8fafc, #e5e7eb); box-shadow: inset 0 -4px rgba(0,0,0,0.06); border:1px solid #e5e7eb;
}
.lid-hinge{
  position:absolute; left:0; right:0; bottom:-6px; height:10px; border-radius:0 0 8px 8px; opacity:0.95;
  background: linear-gradient(180deg, #e5e7eb, #cbd5e1); border:1px solid #e5e7eb;
}
.bin-lid.closed{ transform:rotateX(0deg) }
.bin-lid.open{   transform:rotateX(-48deg) translateY(-6px) }
.bin-body{
  width:190px; height:170px; border-radius:20px; padding:12px; position:relative; display:flex; align-items:center; justify-content:center;
  box-shadow: inset 0 -14px rgba(0,0,0,0.06); transition: background var(--fast), box-shadow var(--fast), transform var(--med);
  background: var(--bin); border:1px solid #e5e7eb;
}
.bin-body:hover{ transform: translateY(-1px) }
.bin-inner{ width:130px; height:100px; display:grid; place-items:center }
.bin-doodle{ width:100%; height:100% }
.bin-footer{ width:100%; display:flex; justify-content:space-between; padding:6px 20px; margin-top:-6px }
.bin-wheel{ width:28px; height:28px; background:#111827; border-radius:7px; box-shadow: inset 0 -4px rgba(0,0,0,0.18), 0 2px 3px rgba(0,0,0,.12); border:1px solid rgba(255,255,255,.08); }

/* Animation */
@keyframes spinDrop {
  0%   { transform: translate3d(0,0,0) rotate(0deg)   scale(1);   opacity:1; }
  60%  { transform: translate3d(12px,60px,0) rotate(200deg) scale(0.85); opacity:.92; }
  100% { transform: translate3d(48px,270px,0) rotate(360deg) scale(0.42); opacity:0; }
}
.falling-clone{
  position:fixed !important; width:auto; height:auto; pointer-events:none; z-index:9999;
  will-change: transform, opacity; animation: spinDrop 900ms var(--ease) forwards;
}

/* Action row */
.action-row{ display:flex; gap:12px; margin-top:6px }
#sendBtn[disabled]{ opacity:.55; cursor:not-allowed }

/* Arrow bounce */
@keyframes arrowBounce { 0%{transform:translateY(-6px)} 50%{transform:translateY(2px)} 100%{transform:translateY(-6px)} }

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; }
}

/* Small screens */
@media (max-width: 520px){
  .thumb{ width:100%; }
  .monitor-bezel{ padding:12px 12px 22px }
  .monitor-chin{ width:84% }
  #rightCol{ gap: 14px }
}
